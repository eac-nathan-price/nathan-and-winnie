<!-- <mat-form-field>
  <mat-label>Select Game</mat-label>
  <mat-select [(value)]="game">
    @for (game of games; track game) {
      <mat-option [value]="game">
        {{ game.title }}
      </mat-option>
    }
  </mat-select>
</mat-form-field>

@if (game) {
  <mat-form-field>
    <mat-label>Select Round</mat-label>
    <mat-select [(value)]="selectedRound">
      @for (round of game.rounds; track round; let i = $index) {
        <mat-option [value]="round">
          Round {{i + 1}}
        </mat-option>
      }
    </mat-select>
  </mat-form-field>

  @if (selectedRound) {
    <mat-form-field>
      <mat-label>Select Question</mat-label>
      <mat-select [(value)]="selectedQuestion">
        @for (question of selectedRound.questions; track question) {
          <mat-option [value]="question">
            {{ question.text }}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>

    @if (selectedQuestion) {
      <div class="answers-grid" [style.grid-template-rows]="'repeat(' + gridRows + ', auto)'">
        @for (answer of selectedQuestion.answers; track answer) {
          <div class="answer-item">
            <span>{{ answer.text }} ({{ answer.points * selectedRound.multiplier }})</span>
          </div>
        }
      </div>
    }
  }
}

<form [formGroup]="teamsForm">
  <div formArrayName="teams">
    <div *ngFor="let team of teams.controls; let i=index" [formGroupName]="i" class="team-row">
      <mat-form-field>
        <input matInput formControlName="name" placeholder="Team Name">
      </mat-form-field>
      
      <mat-form-field>
        <input matInput type="number" formControlName="score" placeholder="Score">
      </mat-form-field>
      
      <button mat-icon-button (click)="removeTeam(i)">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>
  
  <button mat-button (click)="addTeam()">
    <mat-icon>add</mat-icon>
    Add Team
  </button>
</form> -->
@let game_ = currGame();
@if (!game_) {
  <div class="games">
    <h3>Games:</h3>
    @for (game of games; track game) {
      <ul>
        <li>
          <a [routerLink]="['/feud', { id: game.id }]">{{ game.title }}</a>
        </li>
      </ul>
    }
  </div>
} @else {
  @if (game_.password && password !== game_.password) {
    <div class="password">
      <mat-form-field appearance="outline">
        <input matInput [(ngModel)]="password" placeholder="Password">
      </mat-form-field>
    </div>
  } @else {
    <div class="form-row">
      <button mat-flat-button (click)="openPopup()">Open Popup</button>
      <button mat-flat-button (click)="syncPopup()">Sync Popup</button>
    </div>
    <div class="form-row">
      @for (team of teams; track team; let i = $index) {
        <mat-form-field appearance="outline" subscriptSizing="dynamic">
          <input matInput [(ngModel)]="team.name" placeholder="Team {{i + 1}}">
        </mat-form-field>
        <mat-form-field appearance="outline" subscriptSizing="dynamic">
          <input type="number" matInput [(ngModel)]="team.score" placeholder="Score">
        </mat-form-field>
      }
    </div>
 
    <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="center">
      <mat-tab label="Title">
        <div class="tab mirror">
          <div class="title">
            <div class="title-row">
              @for (text of game_.title1; track text) {
                <span [attr.data-text]="text">{{ text }}</span>
              }
            </div>
            <div class="title-row">
              @for (text of game_.title2; track text) {
                <span [attr.data-text]="text">{{ text }}</span>
              }
            </div>
          </div>
          <div class="subtitle">
            <span>
              @for (text of game_.subtitle; track text) {
                {{ text }}
              }
            </span>
          </div>
          <div class="teams">
            @for (team of teams; track team) {
              <div class="team-row">
                <div class="team">{{ team.name }}</div>
                <div class="points">{{ team.score }}</div>
              </div>
            }
          </div>
        </div>
      </mat-tab>
      @for (round of game_.rounds; track round;) {
        <mat-tab [label]="round.title">
          <div class="tab">
            <h1>{{ round.title }}</h1>
            @for (question of round.questions; track question) {
              <div class="question">
                <h2>{{ question.text }}</h2>
                @for (team of teams; track team) {
                  <button mat-flat-button>{{ team.name }}</button>
                }
              </div>
            }
          </div>
        </mat-tab>
      }
    </mat-tab-group>
  }
}
